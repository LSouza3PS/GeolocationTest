<!DOCTYPE html>

<html>

<head>

    <title>Obter Localização</title>

</head>

<body>

    <p>Clique no botão abaixo para conceder permissão permanente para acessar sua localização.</p>
    <p id="demo"></p>
    

    <button onclick="solicitarPermissaoPermanente()">Conceder Permissão Permanente</button>

 

    <script>

        function solicitarPermissaoPermanente() {

            if ("geolocation" in navigator) {

                navigator.permissions.query({ name: "geolocation" }).then(function (result) {

                    if (result.state === "granted") {

                        console.log("Permissão permanente já concedida.");


                    } else if (result.state === "prompt") {

                        console.log("Você precisa conceder permissão permanente nas configurações de privacidade do navegador.");
                        navigator.geolocation.getCurrentPosition(function(position) {
                            document.getElementById("demo").innerHTML =
                            "Latitude: " + position.coords.latitude + "<br>" +
                            "Longitude: " + position.coords.longitude + new Date();
                            })

                    } else if (result.state === "denied") {

                        console.log("Permissão permanente negada. Você pode alterar isso nas configurações de privacidade do navegador.");

                    }

 

                    result.onchange = function () {

                        console.log("Estado da permissão de localização alterado para: " + result.state);

                    };

                });

            } else {

                console.log("Geolocalização não suportada pelo seu navegador.");

            }

        }

    </script>

</body>

</html>